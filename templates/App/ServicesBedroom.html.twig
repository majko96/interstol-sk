{% extends 'base.html.twig' %}
{% block body %}
    <div class="container mt100 mb-5">
        <h1>Vstavané skrine</h1>
        <div class="row mt-5">
            <div class="col-12">
                <p class="pe-md-5 about-us">
                    Radi Vám poradíme pri návrhu a rozmiestnení
                    jednotlivých častí vstavaného šatníka. Najdôležitejším faktorom je funkčnosť a správne
                    rozmiestnenie vnútorných regálov, aby ste dosiahli maximálny úložný priestor.
                    Šatníky dodávame v širokej škále farieb a materiálov. Ich výber záleží len na Vás - hliníkové
                    profily, drevotriesky, sklo či zrkadlo.
                </p>

                {% block stylesheets %}
                    {{ parent() }}
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.css" />
                {% endblock %}

                {% if gallery is defined %}
                    {% include 'gallery/_gallery.html.twig' with {
                        gallery: gallery,
                        galleryIndex: 1,
                    } %}
                {% else %}
                {% endif %}

            </div>
        </div>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.umd.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Fancybox.bind("[data-fancybox]", { preload: 1 });

            const lazyImages = document.querySelectorAll('img.lazy-image');

            if ('IntersectionObserver' in window) {
                const imgObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }
                            observer.unobserve(img);
                        }
                    });
                }, { rootMargin: '200px', threshold: 0.1 });

                lazyImages.forEach(img => imgObserver.observe(img));
            } else {
                lazyImages.forEach(img => {
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                    }
                });
            }
        });
    </script>
{% endblock %}
