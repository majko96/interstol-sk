{% extends 'base.html.twig' %}
{% block body %}
    <div class="container mt100 mb-5">
        <h1>A-typický nábytok</h1>
        <div class="row mt-5">
            <div class="col-12">
                <p class="pe-md-5 about-us">
                    Radi by ste oživili svoj interiér? Kontaktujte nás a my Vám vyrobíme jedinečný, kvalitný,
                    štýlový a moderný nábytok na mieru či už sa jedná o rôzne:
                    <ul class="styled-list">
                        <li>
                             Komody
                        </li>
                        <li>
                            TV skrinky
                        </li>
                        <li>
                            Postele
                        </li>
                        <li>
                            Detské izby
                        </li>
                        <li>
                            Spálne
                        </li>
                        <li>
                            Predsiene
                        </li>
                    </ul>
                </p>

                {% block stylesheets %}
                    {{ parent() }}
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.css" />
                {% endblock %}

                {% if gallery is defined %}
                    {% include 'gallery/_gallery.html.twig' with {
                        gallery: gallery,
                        galleryIndex: 1,
                    } %}
                {% else %}
                {% endif %}
            </div>
        </div>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.umd.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Fancybox.bind("[data-fancybox]", { preload: 1 });

            const lazyImages = document.querySelectorAll('img.lazy-image');

            if ('IntersectionObserver' in window) {
                const imgObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }
                            observer.unobserve(img);
                        }
                    });
                }, { rootMargin: '200px', threshold: 0.1 });

                lazyImages.forEach(img => imgObserver.observe(img));
            } else {
                lazyImages.forEach(img => {
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                    }
                });
            }
        });
    </script>
{% endblock %}
