{% extends 'base.html.twig' %}
{% block body %}
    <div class="container mt100 mb-5">
        <h1>Kuchyne na mieru</h1>
        <div class="row mt-5">
            <div class="col-12">
                <p class="pe-md-5 about-us">
                    <span class="main-color fst-italic fw-light">"Láska ide cez žalúdok„</span><br>
                    Kuchyňa je srdcom každej domácnosti. Je to miesto, kde sa spolu stretáva celá rodina. Preto je
                    potrebné dokonale zladiť funkčnosť, estetiku a praktickosť tak, aby vyhovovala všetkým.
                    Možnosti, ktoré ponúkame sú neobmedzené a záleží na Vás, akú farbu, tvar, výsuvné systémy,
                    spotrebiče si zvolíte. Vďaka nášmu 3D návrhu získate dokonalú predstavu. Samozrejmosťou je, že ak
                    sa rozhodnete pre realizáciu kuchyne u nás, 3D vizualizáciu získate úplne zdarma.<br/><br/>
                    <span class="main-color fst-italic fw-light">"To, čo iný považuje za kvalitu, je u nás štandardom.„</span>
                </p>

                    {% block stylesheets %}
                        {{ parent() }}
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.css" />
                    {% endblock %}

                    {% if galleries is defined %}
                        {% for item in galleries %}
                            <h2 class="mt-5">{{ item.title }}</h2>

                            {% include 'gallery/_gallery.html.twig' with {
                                gallery: item.images,
                                galleryIndex: loop.index,
                            } %}
                        {% endfor %}
                    {% endif %}
            </div>
        </div>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0/dist/fancybox/fancybox.umd.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Fancybox.bind("[data-fancybox]", { preload: 1 });

            const lazyImages = document.querySelectorAll('img.lazy-image');

            if ('IntersectionObserver' in window) {
                const imgObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }
                            observer.unobserve(img);
                        }
                    });
                }, { rootMargin: '200px', threshold: 0.1 });

                lazyImages.forEach(img => imgObserver.observe(img));
            } else {
                lazyImages.forEach(img => {
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                    }
                });
            }
        });
    </script>
{% endblock %}
